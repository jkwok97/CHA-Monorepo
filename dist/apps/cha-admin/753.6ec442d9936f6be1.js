"use strict";(self.webpackChunkcha_admin=self.webpackChunkcha_admin||[]).push([[753],{7753:(ga,Z,o)=>{o.r(Z),o.d(Z,{ChaAdminLeagueAwardsModule:()=>ua});var $=o(6895),S=o(433),l=o(8776),i=o(9653),M=o(644),I=o(4057),O=o(8235),F=o(2336),L=o(5593),E=o(3214),J=o(1740),k=o(2675),j=o(1624),N=o(5199),X=o(8173),q=o(7240),V=o(5621),f=o(6129),p=o(4004),A=o(262),y=o(9646),x=o(8505);const c="[LEAGUE AWARDS]",d={getAwards:(0,i.PH)(`${c} Get Awards`),getAwardsSuccess:(0,i.PH)(`${c} Get Awards Success`,(0,i.Ky)()),addAward:(0,i.PH)(`${c} Add Award`,(0,i.Ky)()),addAwardSuccess:(0,i.PH)(`${c} Add Award Success`,(0,i.Ky)()),editAward:(0,i.PH)(`${c} Edit Award`,(0,i.Ky)()),editAwardSuccess:(0,i.PH)(`${c} Edit Award Success`,(0,i.Ky)()),deleteAward:(0,i.PH)(`${c} Delete Award`,(0,i.Ky)()),deleteAwardSuccess:(0,i.PH)(`${c} Delete Award Success`,(0,i.Ky)()),getUsers:(0,i.PH)(`${c} Get Users`),getUsersSuccess:(0,i.PH)(`${c} Get Users Success`,(0,i.Ky)()),getAwardTypes:(0,i.PH)(`${c} Get Award Types`),getAwardTypesSuccess:(0,i.PH)(`${c} Get Award Types Success`,(0,i.Ky)()),getPlayers:(0,i.PH)(`${c} Get Players`,(0,i.Ky)()),getPlayersSuccess:(0,i.PH)(`${c} Get Players Success`,(0,i.Ky)()),getGoalies:(0,i.PH)(`${c} Get Goalies`,(0,i.Ky)()),getGoaliesSuccess:(0,i.PH)(`${c} Get Goalies Success`,(0,i.Ky)()),error:(0,i.PH)(`${c} Error`)},Q={awards:[],users:[],awardTypes:[],players:[],goalies:[],loading:!1,loaded:!1,saving:!1,saved:!1},fe=(0,i.Lq)(Q,(0,i.on)(d.getAwards,t=>({...t,loading:!0,loaded:!1})),(0,i.on)(d.addAward,d.editAward,d.deleteAward,t=>({...t,saving:!0,saved:!1})),(0,i.on)(d.getAwardsSuccess,(t,s)=>({...t,awards:s.awards,loading:!1,loaded:!0})),(0,i.on)(d.getUsersSuccess,(t,s)=>({...t,users:s.users})),(0,i.on)(d.getAwardTypesSuccess,(t,s)=>({...t,awardTypes:s.awardTypes})),(0,i.on)(d.getPlayersSuccess,(t,s)=>({...t,players:s.players})),(0,i.on)(d.getGoaliesSuccess,(t,s)=>({...t,goalies:s.goalies})),(0,i.on)(d.addAwardSuccess,d.editAwardSuccess,d.deleteAwardSuccess,(t,s)=>({...t,saving:!1,saved:!0})),(0,i.on)(d.error,t=>Q));function Ae(t,s){return fe(t,s)}const h=(0,i.ZF)("league-awards"),Le=(0,i.P1)(h,t=>t.loading),xe=(0,i.P1)(h,t=>t.loaded),Pe=(0,i.P1)(h,t=>t.saving),Ge=(0,i.P1)(h,t=>t.saved),Ue=(0,i.P1)(h,t=>t.awards),R=(0,i.P1)(h,t=>t.users),Ze=(0,i.P1)(R,t=>t.map(s=>({value:s.id,label:`${s.firstname} ${s.lastname}`}))),Me=(0,i.P1)(h,t=>t.awardTypes),Ie=(0,i.P1)(Me,t=>t.map(s=>({value:s.id,label:`${s.display_name}`}))),Oe=(0,i.P1)(h,t=>t.players),Ee=(0,i.P1)(Oe,t=>t.map(s=>({value:s.player_id.id,label:`${s.player_id.firstname} ${s.player_id.lastname}`}))),Je=(0,i.P1)(h,t=>t.goalies),m={selectLoaded:xe,selectLoading:Le,selectSaving:Pe,selectSaved:Ge,selectAwards:Ue,selectUsers:R,selectUsersOptions:Ze,selectAwardTypesOptions:Ie,selectPlayersOptions:Ee,selectGoaliesOptions:(0,i.P1)(Je,t=>t.map(s=>({value:s.player_id.id,label:`${s.player_id.firstname} ${s.player_id.lastname}`})))};var e=o(4650);let v=(()=>{class t{constructor(a){this.store=a,this.isLoading$=this.store.select(m.selectLoading),this.isLoaded$=this.store.select(m.selectLoaded),this.isSaving$=this.store.select(m.selectSaving),this.isSaved$=this.store.select(m.selectSaved),this.awards$=this.store.select(m.selectAwards),this.users$=this.store.select(m.selectUsersOptions),this.awardTypes$=this.store.select(m.selectAwardTypesOptions),this.players$=this.store.select(m.selectPlayersOptions),this.goalies$=this.store.select(m.selectGoaliesOptions)}getAwards(){this.store.dispatch(d.getAwards())}getUsers(){this.store.dispatch(d.getUsers())}getAwardTypes(){this.store.dispatch(d.getAwardTypes())}getPlayers(a,r){this.store.dispatch(d.getPlayers({season:a,teamName:r}))}getGoalies(a,r){this.store.dispatch(d.getGoalies({season:a,teamName:r}))}addAward(a){this.store.dispatch(d.addAward({award:a}))}editAward(a){this.store.dispatch(d.editAward({award:a}))}deleteAward(a){this.store.dispatch(d.deleteAward({awardId:a}))}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(i.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var Qe=o(529);let Re=(()=>{class t{constructor(a,r){this._http=a,this.apiUrl=r}getAll(){return this._http.get(`${this.apiUrl}/awards`).pipe((0,p.U)(a=>a))}addAward(a){return this._http.post(`${this.apiUrl}/awards/add`,a).pipe((0,p.U)(n=>n))}editAward(a){return this._http.put(`${this.apiUrl}/awards/${a.id}`,a).pipe((0,p.U)(r=>r))}deleteAward(a){return this._http.delete(`${this.apiUrl}/awards/${a}`).pipe((0,p.U)(r=>r))}getUsers(){return this._http.get(`${this.apiUrl}/users`).pipe((0,p.U)(a=>a))}getAwardTypes(){return this._http.get(`${this.apiUrl}/awards/types`).pipe((0,p.U)(a=>a))}getPlayers(a,r){return this._http.get(`${this.apiUrl}/player-stats/team/${r}/${a}`).pipe((0,p.U)(n=>n))}getGoalies(a,r){return this._http.get(`${this.apiUrl}/goalie-stats/team/${r}/${a}`).pipe((0,p.U)(n=>n))}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(Qe.eN),e.LFG("apiUrl"))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var H=o(805);let K=(()=>{class t{constructor(a,r,n,u){this.actions$=a,this.leagueAwardsService=r,this.leagueAwardsFacade=n,this.messageService=u,this.getAwards$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.getAwards),(0,f.z)(w=>this.leagueAwardsService.getAll().pipe((0,p.U)(g=>d.getAwardsSuccess({awards:g})),(0,A.K)(()=>(0,y.of)(d.error())))))),this.addAward$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.addAward),(0,f.z)(w=>this.leagueAwardsService.addAward(w.award).pipe((0,p.U)(g=>d.addAwardSuccess({award:g})),(0,A.K)(()=>(0,y.of)(d.error())))))),this.addTeamSuccess$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.addAwardSuccess),(0,x.b)(()=>{this.messageService.add({severity:"success",summary:"Add Award",detail:"Award has been added"}),this.leagueAwardsFacade.getAwards()})),{dispatch:!1}),this.editTeam$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.editAward),(0,f.z)(w=>this.leagueAwardsService.editAward(w.award).pipe((0,p.U)(g=>d.editAwardSuccess({award:g})),(0,A.K)(()=>(0,y.of)(d.error())))))),this.editTeamSuccess$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.editAwardSuccess),(0,x.b)(()=>{this.messageService.add({severity:"success",summary:"Edit Award",detail:"Award has been updated"}),this.leagueAwardsFacade.getAwards()})),{dispatch:!1}),this.deleteAward$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.deleteAward),(0,f.z)(w=>this.leagueAwardsService.deleteAward(w.awardId).pipe((0,p.U)(g=>d.deleteAwardSuccess({award:g})),(0,A.K)(()=>(0,y.of)(d.error())))))),this.deleteTeamSuccess$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.deleteAwardSuccess),(0,x.b)(()=>{this.messageService.add({severity:"success",summary:"Delete Award",detail:"Award has been removed"}),this.leagueAwardsFacade.getAwards()})),{dispatch:!1}),this.getUsers$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.getUsers),(0,f.z)(w=>this.leagueAwardsService.getUsers().pipe((0,p.U)(g=>d.getUsersSuccess({users:g})),(0,A.K)(()=>(0,y.of)(d.error())))))),this.getAwardTypes$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.getAwardTypes),(0,f.z)(w=>this.leagueAwardsService.getAwardTypes().pipe((0,p.U)(g=>d.getAwardTypesSuccess({awardTypes:g})),(0,A.K)(()=>(0,y.of)(d.error())))))),this.getPlayers$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.getPlayers),(0,f.z)(w=>this.leagueAwardsService.getPlayers(w.season,w.teamName).pipe((0,p.U)(g=>d.getPlayersSuccess({players:g})),(0,A.K)(()=>(0,y.of)(d.error())))))),this.getGoalies$=(0,l.GW)(()=>this.actions$.pipe((0,l.l4)(d.getGoalies),(0,f.z)(w=>this.leagueAwardsService.getGoalies(w.season,w.teamName).pipe((0,p.U)(g=>d.getGoaliesSuccess({goalies:g})),(0,A.K)(()=>(0,y.of)(d.error()))))))}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(l.eX),e.LFG(Re),e.LFG(v),e.LFG(H.ez))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var D=o(1779),P=o(8417),G=o(590),Y=o(1889),B=o(4984),He=o(4268),C=o(655),_=o(9933),z=o(9300),U=o(8675),W=o(3900);let b=class{constructor(s,a){this.leagueAwardsFacade=s,this.leagueDataFacade=a,this.form=new S.nJ({}),this.model={},this.options={},this.users$=this.leagueAwardsFacade.users$,this.currentUsers$=this.leagueDataFacade.leagueUsersOptions$,this.awardTypes$=this.leagueAwardsFacade.awardTypes$,this.teams$=this.leagueDataFacade.leagueTeamsOptionsById$,this.players$=this.leagueAwardsFacade.players$,this.goalies$=this.leagueAwardsFacade.goalies$}ngOnInit(){this.leagueAwardsFacade.getAwardTypes(),this.leagueAwardsFacade.getUsers(),this.award&&this.patchForm(),this.createFields()}createFields(){this.fields=[{fieldGroupClassName:"w-full flex flex-wrap column-gap-2 row-gap-3",fieldGroup:[this.currentSeasonField(),this.displaySeasonField()]},{fieldGroupClassName:"w-full flex flex-wrap column-gap-2 row-gap-2",fieldGroup:[this.userField(),this.userTeamField(),this.awardTypeField()]},{fieldGroupClassName:"w-full flex flex-wrap column-gap-2 row-gap-2",fieldGroup:[this.playerField()]}]}patchForm(){this.model={cha_season:this.award?.cha_season,display_season:this.award?.display_season,award_type:this.award?.award_type.id,users_id:this.award?.users_id.id,player_id:this.award?.player_id?.id}}currentSeasonField(){return{key:"cha_season",className:"w-full md:w-3",type:"text-input",templateOptions:{label:"CHA Season",placeholder:"Enter Season",required:!0},validation:{messages:{required:()=>"Season is required"}},hooks:{onInit:s=>{this.award||this.leagueDataFacade.currentSeason$.pipe((0,G.P)()).subscribe(a=>{a&&s.formControl?.setValue(a)})}}}}displaySeasonField(){return{key:"display_season",className:"w-full md:w-3",type:"text-input",templateOptions:{label:"Season To Display",placeholder:"Enter Season",required:!0},validation:{messages:{required:()=>"Season is required"}},hooks:{onInit:s=>{this.award||this.leagueDataFacade.currentSeason$.pipe((0,G.P)()).subscribe(a=>{const r=a?.split("-");r&&s.formControl?.setValue(Number(r[0])+1)})}}}}awardTypeField(){return{key:"award_type",className:"w-full md:w-3",type:"single-select",templateOptions:{label:"Award Type",placeholder:"Select Award Type",required:!0,options:this.awardTypes$,valueProp:"value",labelProp:"label"},validation:{messages:{required:()=>"Award Type is required"}}}}userTeamField(){return{key:"team_id",className:"w-full md:w-3",type:"single-select",templateOptions:{label:"Team",placeholder:"Select Team",readonly:!0,required:!0,options:this.teams$,valueProp:"value",labelProp:"label"},validation:{messages:{required:()=>"Team is required"}},hooks:{onInit:s=>{const a=this.form.get("users_id");a?.valueChanges.pipe((0,U.O)(a.value),(0,W.w)(r=>this.leagueDataFacade.getTeamIdFromUserId(r)),(0,_.t)(this)).subscribe(r=>{r&&s.formControl?.patchValue(r)})}}}}userField(){return{key:"users_id",className:"w-full md:w-3",type:"single-select",templateOptions:{label:"Owner",placeholder:"Select Owner",required:!0,options:this.award?this.users$:this.currentUsers$,valueProp:"value",labelProp:"label"},validation:{messages:{required:()=>"Owner is required"}}}}playerField(){return{key:"player_id",className:"w-full md:w-3",type:"single-select",templateOptions:{label:"Player / Goalie",placeholder:"Select",required:!0,valueProp:"value",labelProp:"label"},validation:{messages:{required:()=>"Player is required"}},hideExpression:s=>2===s.award_type||3===s.award_type||4===s.award_type||!s.award_type,hooks:{onInit:s=>{const a=this.form.get("team_id"),r=this.form.get("cha_season"),n=this.form.get("award_type");a?.valueChanges.pipe((0,U.O)(a.value),(0,W.w)(u=>this.leagueDataFacade.getTeamNameById(u)),(0,_.t)(this)).subscribe(u=>{u&&r&&(this.leagueAwardsFacade.getPlayers(r.value,u),this.leagueAwardsFacade.getGoalies(r.value,u))}),n?.valueChanges.pipe((0,U.O)(n.value),(0,_.t)(this)).subscribe(u=>{if(s.props)switch(u){case 7:s.props.options=this.goalies$;break;case 5:case 6:case 8:s.props.options=this.players$}})}}}}};b.\u0275fac=function(s){return new(s||b)(e.Y36(v),e.Y36(P.Ib))},b.\u0275cmp=e.Xpm({type:b,selectors:[["cha-admin-league-awards-edit-form"]],inputs:{award:"award"},decls:2,vars:5,consts:[[1,"w-full",3,"formGroup"],[3,"model","fields","options","form"]],template:function(s,a){1&s&&(e.TgZ(0,"form",0),e._UZ(1,"formly-form",1),e.qZA()),2&s&&(e.Q6J("formGroup",a.form),e.xp6(1),e.Q6J("model",a.model)("fields",a.fields)("options",a.options)("form",a.form))},dependencies:[S._Y,S.JL,S.sg,I.T7],encapsulation:2,changeDetection:0}),b=(0,C.gn)([(0,_.c)(),(0,C.w6)("design:paramtypes",[v,P.Ib])],b);var Ke=o(3186),De=o(1185);function Ye(t,s){if(1&t&&(e.TgZ(0,"perfect-scrollbar"),e._UZ(1,"cha-admin-league-awards-edit-form",9),e.qZA()),2&t){const a=e.oxw();e.Akn(a.panelStyle),e.xp6(1),e.Q6J("award",a.award)}}function Be(t,s){if(1&t&&e._UZ(0,"cha-admin-league-awards-edit-form",9),2&t){const a=e.oxw();e.Q6J("award",a.award)}}function ze(t,s){if(1&t){const a=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onDelete())}),e.qZA()}}let T=class{constructor(s){this.leagueAwardsFacade=s,this.closeSidebar=new e.vpe,this.editMode=!1,this.panelStyle={width:"100%",height:"65vh"}}ngOnInit(){this.editMode=!!this.award}onCancel(){this.closeSidebar.emit(!0)}onSave(){const s={...this.awardFormRef?.form.value,id:this.award?this.award.id:null};this.editMode?this.award&&this.leagueAwardsFacade.editAward(s):this.leagueAwardsFacade.addAward(s),this.leagueAwardsFacade.isSaving$.pipe((0,_.t)(this),(0,z.h)(a=>!a)).subscribe(()=>this.closeSidebar.emit(!0))}onDelete(){this.award&&(this.leagueAwardsFacade.deleteAward(this.award.id),this.leagueAwardsFacade.isSaving$.pipe((0,_.t)(this),(0,z.h)(s=>!s)).subscribe(()=>this.closeSidebar.emit(!0)))}};T.\u0275fac=function(s){return new(s||T)(e.Y36(v))},T.\u0275cmp=e.Xpm({type:T,selectors:[["cha-admin-league-awards-edit"]],viewQuery:function(s,a){if(1&s&&e.Gf(b,5),2&s){let r;e.iGM(r=e.CRH())&&(a.awardFormRef=r.first)}},inputs:{award:"award",isMobile:"isMobile"},outputs:{closeSidebar:"closeSidebar"},decls:12,vars:6,consts:[[2,"background-color","var(--background-100)"],[1,"text-lg","font-light","text-center"],[3,"style",4,"ngIf"],[3,"award",4,"ngIf"],[1,"flex","justify-content-between"],[1,"flex","column-gap-1"],["pButton","","pRipple","","type","button",1,"p-button-raised",3,"label","disabled","click"],["pButton","","pRipple","","type","button","label","Cancel",1,"p-button-raised","p-button-warning",3,"click"],["pButton","","pRipple","","type","button","label","Delete","class","p-button-raised p-button-danger",3,"click",4,"ngIf"],[3,"award"],["pButton","","pRipple","","type","button","label","Delete",1,"p-button-raised","p-button-danger",3,"click"]],template:function(s,a){1&s&&(e.TgZ(0,"blade-card",0)(1,"blade-card-header",1),e._uU(2),e.qZA(),e.TgZ(3,"blade-card-body"),e.YNc(4,Ye,2,3,"perfect-scrollbar",2),e.YNc(5,Be,1,1,"cha-admin-league-awards-edit-form",3),e.qZA(),e.TgZ(6,"blade-card-footer")(7,"div",4)(8,"div",5)(9,"button",6),e.NdJ("click",function(){return a.onSave()}),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return a.onCancel()}),e.qZA()(),e.YNc(11,ze,1,0,"button",8),e.qZA()()()),2&s&&(e.xp6(2),e.hij(" ",a.editMode?"Edit Award":"Add Award"," "),e.xp6(2),e.Q6J("ngIf",a.isMobile),e.xp6(1),e.Q6J("ngIf",!a.isMobile),e.xp6(4),e.Q6J("label",a.editMode?"Save Award":"Add Award")("disabled",(null==a.awardFormRef||null==a.awardFormRef.form?null:a.awardFormRef.form.invalid)||!(null!=a.awardFormRef&&null!=a.awardFormRef.form&&a.awardFormRef.form.dirty)),e.xp6(2),e.Q6J("ngIf",a.editMode))},dependencies:[$.O5,M.Vv,L.Hq,Y.A,B.y,Ke.x,De.n,b],encapsulation:2,changeDetection:0}),T=(0,C.gn)([(0,_.c)(),(0,C.w6)("design:paramtypes",[v])],T);const We=["dt"];function ke(t,s){if(1&t){const a=e.EpF();e.TgZ(0,"div",6)(1,"span",7),e._UZ(2,"i",8),e.TgZ(3,"input",9),e.NdJ("input",function(n){e.CHM(a);const u=e.oxw();return e.KtG(u.applyFilterGlobal(n,"contains"))}),e.qZA()(),e.TgZ(4,"button",10),e.NdJ("click",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onAddClick())}),e.qZA()()}}function je(t,s){if(1&t&&(e.TgZ(0,"th",12),e._uU(1),e._UZ(2,"p-sortIcon",13),e.qZA()),2&t){const a=s.$implicit;e.Q6J("hidden",!a.visible)("pSortableColumn",a.field),e.xp6(1),e.hij(" ",a.header," "),e.xp6(1),e.Q6J("field",a.field)}}function Xe(t,s){if(1&t&&(e.TgZ(0,"tr"),e.YNc(1,je,3,4,"th",11),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.tableColumns)}}function qe(t,s){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const a=e.oxw().$implicit,r=e.oxw().$implicit;e.xp6(1),e.hij(" ",r[a.field]," ")}}function Ve(t,s){if(1&t){const a=e.EpF();e.ynx(0),e.TgZ(1,"button",19),e.NdJ("click",function(){e.CHM(a);const n=e.oxw(2).$implicit,u=e.oxw();return e.KtG(u.onClick(n))}),e.qZA(),e.BQk()}}function ea(t,s){if(1&t&&(e.TgZ(0,"td",15)(1,"span",16),e._uU(2),e.qZA(),e.TgZ(3,"div",17),e.YNc(4,qe,2,1,"ng-container",18),e.YNc(5,Ve,2,0,"ng-container",18),e.qZA()()),2&t){const a=s.$implicit;e.Q6J("hidden",!a.visible),e.xp6(2),e.Oqu(a.header),e.xp6(2),e.Q6J("ngIf","action"!==a.field),e.xp6(1),e.Q6J("ngIf","action"===a.field)}}function aa(t,s){if(1&t&&(e.TgZ(0,"tr"),e.YNc(1,ea,6,4,"td",14),e.qZA()),2&t){const a=e.oxw();e.xp6(1),e.Q6J("ngForOf",a.tableColumns)}}function ta(t,s){if(1&t){const a=e.EpF();e.TgZ(0,"p-sidebar",20),e.NdJ("visibleChange",function(n){e.CHM(a);const u=e.oxw();return e.KtG(u.display=n)}),e.TgZ(1,"cha-admin-league-awards-edit",21),e.NdJ("closeSidebar",function(){e.CHM(a);const n=e.oxw();return e.KtG(n.onClose())}),e.qZA()()}if(2&t){const a=e.oxw();e.Q6J("visible",a.display)("fullScreen",!0)("showCloseIcon",!1)("dismissible",!1),e.xp6(1),e.Q6J("award",a.award)("isMobile",a.isMobile)}}const sa=function(){return[10,20,25,50,100]},ra=function(){return["player","award","team","user","cha_season"]};let ia=(()=>{class t{constructor(){this.tableColumns=[{field:"id",header:"Award Id",visible:!0},{field:"cha_season",header:"Season",visible:!0},{field:"player",header:"Player",visible:!0},{field:"award",header:"Award",visible:!0},{field:"team",header:"Team",visible:!0},{field:"user",header:"User",visible:!0},{field:"action",header:"Edit",visible:!0}],this.first=0,this.rows=20,this.totalRecords=0,this.sortField="isactive",this.display=!1}ngOnInit(){this.awardsForTable=this.mapItems(this.awards)}applyFilterGlobal(a,r){this.dt?.filterGlobal(a.target.value,r)}mapItems(a){return a.map(r=>({...r,player:r.player_id?`${r.player_id?.firstname} ${r.player_id?.lastname}`:null,award:`${r.award_type?.display_name}`,team:`${r.team_id?.city} ${r.team_id?.nickname}`,user:`${r.users_id?.firstname} ${r.users_id?.lastname}`}))}onClick(a){this.award=a,this.display=!0}onAddClick(){this.award=null,this.display=!0}onClose(){this.display=!1,this.award=null}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cha-admin-league-awards-table"]],viewQuery:function(a,r){if(1&a&&e.Gf(We,5),2&a){let n;e.iGM(n=e.CRH())&&(r.dt=n.first)}},inputs:{isMobile:"isMobile",awards:"awards"},decls:6,vars:15,consts:[["styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",1,"table",3,"responsiveLayout","value","columns","rows","showCurrentPageReport","rowsPerPageOptions","paginator","totalRecords","sortField","sortOrder","filterDelay","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"visible","fullScreen","showCloseIcon","dismissible","visibleChange",4,"ngIf"],[1,"flex","flex-wrap","justify-content-between"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search",3,"input"],["pButton","","type","button","icon","pi pi-plus",1,"p-button-rounded","p-button-primary",3,"click"],[3,"hidden","pSortableColumn",4,"ngFor","ngForOf"],[3,"hidden","pSortableColumn"],[3,"field"],[3,"hidden",4,"ngFor","ngForOf"],[3,"hidden"],[1,"p-column-title"],[1,"table-body-cell"],[4,"ngIf"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-primary",3,"click"],[3,"visible","fullScreen","showCloseIcon","dismissible","visibleChange"],[3,"award","isMobile","closeSidebar"]],template:function(a,r){1&a&&(e.TgZ(0,"p-table",0,1),e.YNc(2,ke,5,0,"ng-template",2),e.YNc(3,Xe,2,1,"ng-template",3),e.YNc(4,aa,2,1,"ng-template",4),e.qZA(),e.YNc(5,ta,2,6,"p-sidebar",5)),2&a&&(e.Q6J("responsiveLayout","stack")("value",r.awardsForTable)("columns",r.tableColumns)("rows",r.rows)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(13,sa))("paginator",!0)("totalRecords",r.totalRecords)("sortField",r.sortField)("sortOrder",-1)("filterDelay",0)("globalFilterFields",e.DdM(14,ra)),e.xp6(5),e.Q6J("ngIf",r.display))},dependencies:[$.sg,$.O5,F.iA,H.jx,F.lQ,F.fz,L.Hq,E.Y,J.o,T],encapsulation:2,changeDetection:0}),t})();const da=function(){return{height:"6px"}};function oa(t,s){1&t&&e._UZ(0,"p-progressBar",4),2&t&&e.Akn(e.DdM(2,da))}function na(t,s){if(1&t&&(e.ynx(0),e._UZ(1,"cha-admin-league-awards-table",5),e.BQk()),2&t){const a=s.ngIf,r=e.oxw(2);e.xp6(1),e.Q6J("isMobile",r.isMobile)("awards",a)}}function la(t,s){if(1&t&&(e.TgZ(0,"blade-card")(1,"blade-card-body"),e.YNc(2,na,2,2,"ng-container",3),e.ALo(3,"async"),e.qZA()()),2&t){const a=e.oxw();e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,a.awards$))}}const ca=[{path:"",component:(()=>{class t{constructor(a,r){this.leagueAwardsFacade=a,this.displayFacade=r,this.isLoaded$=this.leagueAwardsFacade.isLoaded$,this.isLoading$=this.leagueAwardsFacade.isLoading$,this.awards$=this.leagueAwardsFacade.awards$,this.displayFacade.isMobile$.pipe((0,G.P)()).subscribe(n=>{this.isMobile=n}),this.leagueAwardsFacade.getAwards()}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(v),e.Y36(P.pC))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cha-admin-league-awards"]],decls:10,vars:6,consts:[[1,"pt-2"],[1,"text-lg","text-center",2,"font-weight","100"],["mode","indeterminate",3,"style",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],[3,"isMobile","awards"]],template:function(a,r){1&a&&(e.TgZ(0,"blade-layout-feature-content")(1,"div")(2,"div",0)(3,"div",1),e._uU(4," League Awards "),e.qZA()(),e._UZ(5,"blade-divider"),e.YNc(6,oa,1,3,"p-progressBar",2),e.ALo(7,"async"),e.YNc(8,la,4,3,"blade-card",3),e.ALo(9,"async"),e.qZA()()),2&a&&(e.xp6(6),e.Q6J("ngIf",e.lcZ(7,2,r.isLoading$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(9,4,r.isLoaded$)))},dependencies:[$.O5,O.k,Y.A,B.y,He.R,N.C,ia,$.Ov],encapsulation:2,changeDetection:0}),t})()}];let pa=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[D.Bz.forChild(ca),D.Bz]}),t})(),ua=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[K,v],imports:[$.ez,S.UX,M.Xd,O.q,F.U$,L.hJ,E.l,J.j,k.N,j.E,N.C,pa,i.Aw.forFeature("league-awards",Ae),l.sQ.forFeature([K]),I.X0.forRoot({wrappers:[{name:"control-wrapper",component:q.t}],types:[{name:"single-select",component:X.S,wrappers:["control-wrapper"]},{name:"text-input",component:V.T,wrappers:["control-wrapper"]}]})]}),t})()}}]);