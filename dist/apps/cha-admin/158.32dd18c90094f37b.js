"use strict";(self.webpackChunkcha_admin=self.webpackChunkcha_admin||[]).push([[158],{1158:(Ct,Z,o)=>{o.r(Z),o.d(Z,{ChaAdminLeagueTeamsModule:()=>xt});var h=o(6895),y=o(433),c=o(8776),n=o(9653),A=o(4057),U=o(644),F=o(5593),w=o(1740),N=o(8235),Q=o(3214),L=o(2336),H=o(7240),B=o(2675),I=o(5199),q=o(1624),K=o(9180),z=o(5621),W=o(8173),v=o(6129),d=o(4004),b=o(262),x=o(9646),S=o(8505);const r="[LEAGUE TEAMS]",l={getTeams:(0,n.PH)(`${r} Get Teams`),getTeamsSuccess:(0,n.PH)(`${r} Get Teams Success`,(0,n.Ky)()),addTeam:(0,n.PH)(`${r} Add Team`,(0,n.Ky)()),addTeamSuccess:(0,n.PH)(`${r} Add Team Success`,(0,n.Ky)()),editTeam:(0,n.PH)(`${r} Edit Team`,(0,n.Ky)()),editTeamSuccess:(0,n.PH)(`${r} Edit Team Success`,(0,n.Ky)()),deleteTeam:(0,n.PH)(`${r} Delete Team`,(0,n.Ky)()),deleteTeamSuccess:(0,n.PH)(`${r} Delete Team Success`,(0,n.Ky)()),getUsers:(0,n.PH)(`${r} Get Users`),getUsersSuccess:(0,n.PH)(`${r} Get Users Success`,(0,n.Ky)()),getDivisions:(0,n.PH)(`${r} Get Divisions`),getDivisionsSuccess:(0,n.PH)(`${r} Get Divisions Success`,(0,n.Ky)()),error:(0,n.PH)(`${r} Error`)},J={teams:[],users:[],divisions:[],loading:!1,loaded:!1,saving:!1,saved:!1},re=(0,n.Lq)(J,(0,n.on)(l.getTeams,t=>({...t,loading:!0,loaded:!1})),(0,n.on)(l.addTeam,l.editTeam,l.deleteTeam,t=>({...t,saving:!0,saved:!1})),(0,n.on)(l.getTeamsSuccess,(t,i)=>({...t,teams:i.teams,loading:!1,loaded:!0})),(0,n.on)(l.getUsersSuccess,(t,i)=>({...t,users:i.users})),(0,n.on)(l.getDivisionsSuccess,(t,i)=>({...t,divisions:i.divisions})),(0,n.on)(l.addTeamSuccess,l.editTeamSuccess,l.deleteTeamSuccess,(t,i)=>({...t,saving:!1,saved:!0})),(0,n.on)(l.error,t=>J));function de(t,i){return re(t,i)}const _=(0,n.ZF)("league-teams"),ve=(0,n.P1)(_,t=>t.loading),be=(0,n.P1)(_,t=>t.loaded),xe=(0,n.P1)(_,t=>t.saving),Ce=(0,n.P1)(_,t=>t.saved),ye=(0,n.P1)(_,t=>t.teams),M=(0,n.P1)(_,t=>t.users),Le=(0,n.P1)(M,t=>t.map(i=>({value:i.id,label:`${i.firstname} ${i.lastname}`}))),Fe=(0,n.P1)(_,t=>t.divisions),f={selectLoaded:be,selectLoading:ve,selectSaving:xe,selectSaved:Ce,selectTeams:ye,selectUsers:M,selectUsersOptions:Le,selectDivisionsOptions:(0,n.P1)(Fe,t=>t.map(i=>({value:i.id,label:i.divisionname})))};var e=o(4650);let C=(()=>{class t{constructor(a){this.store=a,this.isLoading$=this.store.select(f.selectLoading),this.isLoaded$=this.store.select(f.selectLoaded),this.isSaving$=this.store.select(f.selectSaving),this.isSaved$=this.store.select(f.selectSaved),this.teams$=this.store.select(f.selectTeams),this.users$=this.store.select(f.selectUsersOptions),this.divisions$=this.store.select(f.selectDivisionsOptions)}getTeams(){this.store.dispatch(l.getTeams())}getUsers(){this.store.dispatch(l.getUsers())}getDivisions(){this.store.dispatch(l.getDivisions())}addTeam(a){this.store.dispatch(l.addTeam({team:a}))}editTeam(a){this.store.dispatch(l.editTeam({team:a}))}deleteTeam(a){this.store.dispatch(l.deleteTeam({teamId:a}))}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(n.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var $e=o(529);let Ze=(()=>{class t{constructor(a,s){this._http=a,this.apiUrl=s}getTeams(){return this._http.get(`${this.apiUrl}/teams`).pipe((0,d.U)(a=>a))}addTeam(a){return this._http.post(`${this.apiUrl}/teams/add`,a).pipe((0,d.U)(m=>m))}editTeam(a){return this._http.put(`${this.apiUrl}/teams/${a.id}`,a).pipe((0,d.U)(s=>s))}deleteTeam(a){return this._http.delete(`${this.apiUrl}/teams/delete/${a}`).pipe((0,d.U)(s=>s))}getUsers(){return this._http.get(`${this.apiUrl}/users`).pipe((0,d.U)(a=>a))}getDivisions(){return this._http.get(`${this.apiUrl}/divisions`).pipe((0,d.U)(a=>a))}}return t.\u0275fac=function(a){return new(a||t)(e.LFG($e.eN),e.LFG("apiUrl"))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var E=o(805);let G=(()=>{class t{constructor(a,s,m,u){this.actions$=a,this.leagueTeamsService=s,this.leagueTeamsFacade=m,this.messageService=u,this.getTeams$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.getTeams),(0,v.z)(g=>this.leagueTeamsService.getTeams().pipe((0,d.U)(p=>l.getTeamsSuccess({teams:p})),(0,b.K)(()=>(0,x.of)(l.error())))))),this.addTeam$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.addTeam),(0,v.z)(g=>this.leagueTeamsService.addTeam(g.team).pipe((0,d.U)(p=>l.addTeamSuccess({team:p})),(0,b.K)(()=>(0,x.of)(l.error())))))),this.addTeamSuccess$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.addTeamSuccess),(0,S.b)(()=>{this.messageService.add({severity:"success",summary:"Add Team",detail:"Team has been added"}),this.leagueTeamsFacade.getTeams()})),{dispatch:!1}),this.editTeam$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.editTeam),(0,v.z)(g=>this.leagueTeamsService.editTeam(g.team).pipe((0,d.U)(p=>l.editTeamSuccess({team:p})),(0,b.K)(()=>(0,x.of)(l.error())))))),this.editTeamSuccess$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.editTeamSuccess),(0,S.b)(()=>{this.messageService.add({severity:"success",summary:"Edit Team",detail:"Team has been updated"}),this.leagueTeamsFacade.getTeams()})),{dispatch:!1}),this.deleteTeam$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.deleteTeam),(0,v.z)(g=>this.leagueTeamsService.deleteTeam(g.teamId).pipe((0,d.U)(p=>l.deleteTeamSuccess({team:p})),(0,b.K)(()=>(0,x.of)(l.error())))))),this.deleteTeamSuccess$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.deleteTeamSuccess),(0,S.b)(()=>{this.messageService.add({severity:"success",summary:"Delete Team",detail:"Team has been removed"}),this.leagueTeamsFacade.getTeams()})),{dispatch:!1}),this.getUsers$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.getUsers),(0,v.z)(g=>this.leagueTeamsService.getUsers().pipe((0,d.U)(p=>l.getUsersSuccess({users:p})),(0,b.K)(()=>(0,x.of)(l.error())))))),this.getDivisions$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(l.getDivisions),(0,v.z)(g=>this.leagueTeamsService.getDivisions().pipe((0,d.U)(p=>l.getDivisionsSuccess({divisions:p})),(0,b.K)(()=>(0,x.of)(l.error()))))))}}return t.\u0275fac=function(a){return new(a||t)(e.LFG(c.eX),e.LFG(Ze),e.LFG(C),e.LFG(E.ez))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})();var Y=o(1779),Ae=o(8417),Ue=o(590),we=o(4268),D=o(1889),O=o(4984),k=o(655),$=o(9933),P=o(9300);let R=(()=>{class t{constructor(a){this.leagueTeamsFacade=a,this.form=new y.nJ({}),this.model={},this.options={},this.users$=this.leagueTeamsFacade.users$,this.divisions$=this.leagueTeamsFacade.divisions$}ngOnInit(){this.team&&this.patchForm(),this.createFields()}createFields(){this.fields=[{fieldGroupClassName:"w-full flex flex-wrap column-gap-2 row-gap-3",fieldGroup:[this.isActiveField()]},{fieldGroupClassName:"w-full flex flex-wrap column-gap-2 row-gap-2",fieldGroup:[this.teamAbbreviationField(),this.cityField(),this.nicknameField(),this.userField()]},{fieldGroupClassName:"w-full flex flex-wrap column-gap-2 row-gap-2",fieldGroup:[this.divisionsField(),this.logoField(),this.teamColorField(),this.textColorField()]}]}patchForm(){this.model={shortname:this.team?.shortname,isactive:this.team?.isactive,city:this.team?.city,nickname:this.team?.nickname,users_id:this.team?.users_id,divisions_id:this.team?.divisions_id.id,teamlogo:this.team?.teamlogo,teamcolor:this.team?.teamcolor,teamtextcolor:this.team?.teamtextcolor}}isActiveField(){return{key:"isactive",className:"w-5",type:"checkbox",templateOptions:{label:"Active Team"}}}teamAbbreviationField(){return{key:"shortname",className:"w-full md:w-2",type:"text-input",templateOptions:{label:"Team Abbreviation",placeholder:"Enter Team Abbreviation",required:!0},validation:{messages:{required:()=>"Team Abbreviation is required"}}}}cityField(){return{key:"city",className:"w-full md:w-3",type:"text-input",templateOptions:{label:"City",placeholder:"Enter City",required:!0},validation:{messages:{required:()=>"City is required"}}}}nicknameField(){return{key:"nickname",className:"w-full md:w-3",type:"text-input",templateOptions:{label:"Nickname",placeholder:"Enter Nickname",required:!0},validation:{messages:{required:()=>"Nickname is required"}}}}userField(){return{key:"users_id",className:"w-full md:w-3",type:"single-select",templateOptions:{label:"User",placeholder:"Select User",required:!0,options:this.users$,valueProp:"value",labelProp:"label"},validation:{messages:{required:()=>"User is required"}}}}divisionsField(){return{key:"divisions_id",className:"w-full md:w-2",type:"single-select",templateOptions:{label:"Division",placeholder:"Select Division",required:!0,options:this.divisions$,valueProp:"value",labelProp:"label"},validation:{messages:{required:()=>"Division is required"}}}}logoField(){return{key:"teamlogo",className:"w-full md:w-3",type:"text-input",templateOptions:{label:"Team Logo",placeholder:"Enter Path",required:!0},validation:{messages:{required:()=>"Team Logo is required"}}}}teamColorField(){return{key:"teamcolor",className:"w-full md:w-3",type:"text-input",templateOptions:{label:"Team Color",placeholder:"Enter Hex Color",required:!0},validation:{messages:{required:()=>"Team Color is required"}}}}textColorField(){return{key:"teamtextcolor",className:"w-full md:w-3",type:"text-input",templateOptions:{label:"Team Text Color",placeholder:"Enter Hex Color",required:!0},validation:{messages:{required:()=>"Team Text Color is required"}}}}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cha-admin-league-teams-edit-form"]],inputs:{team:"team"},decls:2,vars:5,consts:[[1,"w-full",3,"formGroup"],[3,"model","fields","options","form"]],template:function(a,s){1&a&&(e.TgZ(0,"form",0),e._UZ(1,"formly-form",1),e.qZA()),2&a&&(e.Q6J("formGroup",s.form),e.xp6(1),e.Q6J("model",s.model)("fields",s.fields)("options",s.options)("form",s.form))},dependencies:[y._Y,y.JL,y.sg,A.T7],encapsulation:2,changeDetection:0}),t})();var Ne=o(3186),Qe=o(1185);function Ie(t,i){if(1&t&&(e.TgZ(0,"perfect-scrollbar"),e._UZ(1,"cha-admin-league-teams-edit-form",9),e.qZA()),2&t){const a=e.oxw();e.Akn(a.panelStyle),e.xp6(1),e.Q6J("team",a.team)}}function Je(t,i){if(1&t&&e._UZ(0,"cha-admin-league-teams-edit-form",9),2&t){const a=e.oxw();e.Q6J("team",a.team)}}function Me(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(a);const m=e.oxw();return e.KtG(m.onDelete())}),e.qZA()}}let T=class{constructor(i){this.leagueTeamsFacade=i,this.closeSidebar=new e.vpe,this.editMode=!1,this.panelStyle={width:"100%",height:"65vh"}}ngOnInit(){this.editMode=!!this.team}onCancel(){this.closeSidebar.emit(!0)}onSave(){const i={...this.teamFormRef?.form.value,isadmin:!!this.teamFormRef?.form.value.isadmin&&this.teamFormRef?.form.value.isadmin,isactive:!!this.teamFormRef?.form.value.isactive&&this.teamFormRef?.form.value.isactive,id:this.team?this.team.id:null};this.editMode?this.team&&this.leagueTeamsFacade.editTeam(i):this.leagueTeamsFacade.addTeam(i),this.leagueTeamsFacade.isSaving$.pipe((0,$.t)(this),(0,P.h)(a=>!a)).subscribe(()=>this.closeSidebar.emit(!0))}onDelete(){this.team&&(this.leagueTeamsFacade.deleteTeam(this.team.id),this.leagueTeamsFacade.isSaving$.pipe((0,$.t)(this),(0,P.h)(i=>!i)).subscribe(()=>this.closeSidebar.emit(!0)))}};T.\u0275fac=function(i){return new(i||T)(e.Y36(C))},T.\u0275cmp=e.Xpm({type:T,selectors:[["cha-admin-league-teams-edit"]],viewQuery:function(i,a){if(1&i&&e.Gf(R,5),2&i){let s;e.iGM(s=e.CRH())&&(a.teamFormRef=s.first)}},inputs:{team:"team",isMobile:"isMobile"},outputs:{closeSidebar:"closeSidebar"},decls:12,vars:6,consts:[[2,"background-color","var(--background-100)"],[1,"text-lg","font-light","text-center"],[3,"style",4,"ngIf"],[3,"team",4,"ngIf"],[1,"flex","justify-content-between"],[1,"flex","column-gap-1"],["pButton","","pRipple","","type","button",1,"p-button-raised",3,"label","disabled","click"],["pButton","","pRipple","","type","button","label","Cancel",1,"p-button-raised","p-button-warning",3,"click"],["pButton","","pRipple","","type","button","label","Delete","class","p-button-raised p-button-danger",3,"click",4,"ngIf"],[3,"team"],["pButton","","pRipple","","type","button","label","Delete",1,"p-button-raised","p-button-danger",3,"click"]],template:function(i,a){1&i&&(e.TgZ(0,"blade-card",0)(1,"blade-card-header",1),e._uU(2),e.qZA(),e.TgZ(3,"blade-card-body"),e.YNc(4,Ie,2,3,"perfect-scrollbar",2),e.YNc(5,Je,1,1,"cha-admin-league-teams-edit-form",3),e.qZA(),e.TgZ(6,"blade-card-footer")(7,"div",4)(8,"div",5)(9,"button",6),e.NdJ("click",function(){return a.onSave()}),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return a.onCancel()}),e.qZA()(),e.YNc(11,Me,1,0,"button",8),e.qZA()()()),2&i&&(e.xp6(2),e.hij(" ",a.editMode?"Edit Team":"Add Team"," "),e.xp6(2),e.Q6J("ngIf",a.isMobile),e.xp6(1),e.Q6J("ngIf",!a.isMobile),e.xp6(4),e.Q6J("label",a.editMode?"Save Team":"Add Team")("disabled",(null==a.teamFormRef||null==a.teamFormRef.form?null:a.teamFormRef.form.invalid)||!(null!=a.teamFormRef&&null!=a.teamFormRef.form&&a.teamFormRef.form.dirty)),e.xp6(2),e.Q6J("ngIf",a.editMode))},dependencies:[h.O5,U.Vv,F.Hq,D.A,O.y,Ne.x,Qe.n,R],changeDetection:0}),T=(0,k.gn)([(0,$.c)(),(0,k.w6)("design:paramtypes",[C])],T);const Ee=["dt"];function Ge(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div",6)(1,"span",7),e._UZ(2,"i",8),e.TgZ(3,"input",9),e.NdJ("input",function(m){e.CHM(a);const u=e.oxw();return e.KtG(u.applyFilterGlobal(m,"contains"))}),e.qZA()(),e.TgZ(4,"button",10),e.NdJ("click",function(){e.CHM(a);const m=e.oxw();return e.KtG(m.onAddClick())}),e.qZA()()}}function Ye(t,i){1&t&&e.GkF(0)}function De(t,i){if(1&t&&(e.TgZ(0,"th",15),e._uU(1),e.qZA()),2&t){const a=i.$implicit;e.Q6J("hidden",!a.visible),e.xp6(1),e.hij(" ",a.header," ")}}function Oe(t,i){if(1&t&&(e.TgZ(0,"tr"),e.YNc(1,De,2,2,"th",14),e.qZA()),2&t){const a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.mobileTeamTableColumns)}}function ke(t,i){if(1&t&&(e.TgZ(0,"th",17),e._uU(1),e._UZ(2,"p-sortIcon",18),e.qZA()),2&t){const a=i.$implicit;e.Q6J("hidden",!a.visible)("pSortableColumn",a.field),e.xp6(1),e.hij(" ",a.header," "),e.xp6(1),e.Q6J("field",a.field)}}function Pe(t,i){if(1&t&&(e.TgZ(0,"tr"),e.YNc(1,ke,3,4,"th",16),e.qZA()),2&t){const a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.teamTableColumns)}}function Re(t,i){if(1&t&&(e.YNc(0,Ye,1,0,"ng-container",11),e.YNc(1,Oe,2,1,"ng-template",null,12,e.W1O),e.YNc(3,Pe,2,1,"ng-template",null,13,e.W1O)),2&t){const a=e.MAs(2),s=e.MAs(4),m=e.oxw();e.Q6J("ngIf",m.isMobile)("ngIfThen",a)("ngIfElse",s)}}function He(t,i){1&t&&e.GkF(0)}function Be(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const a=e.oxw().$implicit,s=e.oxw(2).$implicit;e.xp6(1),e.Oqu(s[a.field])}}function qe(t,i){1&t&&e._UZ(0,"i",26)}function Ke(t,i){1&t&&e._UZ(0,"i",27)}function ze(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,qe,1,0,"i",24),e.YNc(3,Ke,1,0,"i",25),e.qZA(),e.BQk()),2&t){const a=e.oxw().$implicit,s=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",!1===s[a.field]),e.xp6(1),e.Q6J("ngIf",!0===s[a.field])}}function We(t,i){if(1&t&&(e.ynx(0),e._UZ(1,"img",28),e.BQk()),2&t){const a=e.oxw(3).$implicit;e.xp6(1),e.Q6J("src",a.teamlogo,e.LSH)}}function je(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const a=e.oxw().$implicit,s=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null==s[a.field]?null:s[a.field].divisionname," ")}}function Xe(t,i){if(1&t){const a=e.EpF();e.ynx(0),e.TgZ(1,"button",29),e.NdJ("click",function(){e.CHM(a);const m=e.oxw(3).$implicit,u=e.oxw();return e.KtG(u.onTeamClick(m))}),e.qZA(),e.BQk()}}function Ve(t,i){if(1&t&&(e.TgZ(0,"td",15)(1,"span",21),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e.YNc(4,Be,2,1,"ng-container",23),e.YNc(5,ze,4,2,"ng-container",23),e.YNc(6,We,2,1,"ng-container",23),e.YNc(7,je,2,1,"ng-container",23),e.YNc(8,Xe,2,0,"ng-container",23),e.qZA()()),2&t){const a=i.$implicit;e.Q6J("hidden",!a.visible),e.xp6(2),e.Oqu(a.header),e.xp6(2),e.Q6J("ngIf","isactive"!==a.field&&"divisions_id"!==a.field&&"teamlogo"!==a.field),e.xp6(1),e.Q6J("ngIf","isactive"===a.field),e.xp6(1),e.Q6J("ngIf","teamlogo"===a.field),e.xp6(1),e.Q6J("ngIf","divisions_id"===a.field),e.xp6(1),e.Q6J("ngIf","action"===a.field)}}function et(t,i){if(1&t&&(e.TgZ(0,"tr"),e.YNc(1,Ve,9,7,"td",14),e.qZA()),2&t){const a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.mobileTeamTableColumns)}}function tt(t,i){1&t&&e._UZ(0,"i",26)}function at(t,i){1&t&&e._UZ(0,"i",27)}function it(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div"),e.YNc(2,tt,1,0,"i",24),e.YNc(3,at,1,0,"i",25),e.qZA(),e.BQk()),2&t){const a=e.oxw().$implicit,s=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",!1===s[a.field]),e.xp6(1),e.Q6J("ngIf",!0===s[a.field])}}function st(t,i){if(1&t&&(e.ynx(0),e._UZ(1,"img",28),e.BQk()),2&t){const a=e.oxw(3).$implicit;e.xp6(1),e.Q6J("src",a.teamlogo,e.LSH)}}function nt(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const a=e.oxw().$implicit,s=e.oxw(2).$implicit;e.xp6(1),e.Oqu(s[a.field])}}function ot(t,i){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const a=e.oxw().$implicit,s=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null==s[a.field]?null:s[a.field].divisionname," ")}}function lt(t,i){if(1&t){const a=e.EpF();e.ynx(0),e.TgZ(1,"button",29),e.NdJ("click",function(){e.CHM(a);const m=e.oxw(3).$implicit,u=e.oxw();return e.KtG(u.onTeamClick(m))}),e.qZA(),e.BQk()}}function mt(t,i){if(1&t&&(e.TgZ(0,"td",15)(1,"span",21),e._uU(2),e.qZA(),e.TgZ(3,"div",22),e.YNc(4,it,4,2,"ng-container",23),e.YNc(5,st,2,1,"ng-container",23),e.YNc(6,nt,2,1,"ng-container",23),e.YNc(7,ot,2,1,"ng-container",23),e.YNc(8,lt,2,0,"ng-container",23),e.qZA()()),2&t){const a=i.$implicit;e.Q6J("hidden",!a.visible),e.xp6(2),e.Oqu(a.header),e.xp6(2),e.Q6J("ngIf","isactive"===a.field),e.xp6(1),e.Q6J("ngIf","teamlogo"===a.field),e.xp6(1),e.Q6J("ngIf","isactive"!==a.field&&"teamlogo"!==a.field&&"divisions_id"!==a.field),e.xp6(1),e.Q6J("ngIf","divisions_id"===a.field),e.xp6(1),e.Q6J("ngIf","action"===a.field)}}function ct(t,i){if(1&t&&(e.TgZ(0,"tr"),e.YNc(1,mt,9,7,"td",14),e.qZA()),2&t){const a=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",a.teamTableColumns)}}function rt(t,i){if(1&t&&(e.YNc(0,He,1,0,"ng-container",11),e.YNc(1,et,2,1,"ng-template",null,19,e.W1O),e.YNc(3,ct,2,1,"ng-template",null,20,e.W1O)),2&t){const a=e.MAs(2),s=e.MAs(4),m=e.oxw();e.Q6J("ngIf",m.isMobile)("ngIfThen",a)("ngIfElse",s)}}function dt(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"p-sidebar",30),e.NdJ("visibleChange",function(m){e.CHM(a);const u=e.oxw();return e.KtG(u.display=m)}),e.TgZ(1,"cha-admin-league-teams-edit",31),e.NdJ("closeSidebar",function(){e.CHM(a);const m=e.oxw();return e.KtG(m.onClose())}),e.qZA()()}if(2&t){const a=e.oxw();e.Q6J("visible",a.display)("fullScreen",!0)("showCloseIcon",!1)("dismissible",!1),e.xp6(1),e.Q6J("team",a.team)("isMobile",a.isMobile)}}const pt=function(){return[10,20,25,50,100]},ut=function(){return["team_name"]};let gt=(()=>{class t{constructor(){this.teamTableColumns=[{field:"id",header:"Team Id",visible:!0},{field:"teamlogo",header:"Current Logo",visible:!0},{field:"team_name",header:"Name",visible:!0},{field:"divisions_id",header:"Division",visible:!0},{field:"isactive",header:"Is Active",visible:!0},{field:"users_id",header:"User Id",visible:!0},{field:"action",header:"Edit",visible:!0}],this.mobileTeamTableColumns=[{field:"teamlogo",header:"Current Logo",visible:!0},{field:"team_name",header:"Name",visible:!0},{field:"divisions_id",header:"Division",visible:!0},{field:"isactive",header:"Is Active",visible:!0},{field:"users_id",header:"User Id",visible:!0},{field:"action",header:"Edit",visible:!0}],this.first=0,this.rows=20,this.totalRecords=0,this.sortField="isactive",this.display=!1}ngOnInit(){this.teamsForTable=this.mapItems(this.teams)}applyFilterGlobal(a,s){this.dt?.filterGlobal(a.target.value,s)}mapItems(a){return a.map(s=>({...s,team_name:`${s.city} ${s.nickname}`,teamlogo:this.getString(s.teamlogo)}))}getString(a){const s=a.split("/");return`assets/${s[s.length-1]}`}onTeamClick(a){this.team=a,this.display=!0}onAddClick(){this.team=null,this.display=!0}onClose(){this.display=!1,this.team=null}}return t.\u0275fac=function(a){return new(a||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["cha-admin-league-teams-table"]],viewQuery:function(a,s){if(1&a&&e.Gf(Ee,5),2&a){let m;e.iGM(m=e.CRH())&&(s.dt=m.first)}},inputs:{isMobile:"isMobile",teams:"teams"},decls:6,vars:15,consts:[["styleClass","p-datatable-sm p-datatable-striped","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",1,"table",3,"responsiveLayout","value","columns","rows","showCurrentPageReport","rowsPerPageOptions","paginator","totalRecords","sortField","sortOrder","filterDelay","globalFilterFields"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],[3,"visible","fullScreen","showCloseIcon","dismissible","visibleChange",4,"ngIf"],[1,"flex","flex-wrap","justify-content-between"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search Team",3,"input"],["pButton","","type","button","icon","pi pi-plus",1,"p-button-rounded","p-button-primary",3,"click"],[4,"ngIf","ngIfThen","ngIfElse"],["showMobile",""],["showDesktop",""],[3,"hidden",4,"ngFor","ngForOf"],[3,"hidden"],[3,"hidden","pSortableColumn",4,"ngFor","ngForOf"],[3,"hidden","pSortableColumn"],[3,"field"],["showMobileBody",""],["showDesktopBody",""],[1,"p-column-title"],[1,"table-body-cell"],[4,"ngIf"],["class","pi pi-ban text-red-600",4,"ngIf"],["class","pi pi-check-circle text-green-600",4,"ngIf"],[1,"pi","pi-ban","text-red-600"],[1,"pi","pi-check-circle","text-green-600"],["height","30px",3,"src"],["pButton","","type","button","icon","pi pi-pencil",1,"p-button-rounded","p-button-primary",3,"click"],[3,"visible","fullScreen","showCloseIcon","dismissible","visibleChange"],[3,"team","isMobile","closeSidebar"]],template:function(a,s){1&a&&(e.TgZ(0,"p-table",0,1),e.YNc(2,Ge,5,0,"ng-template",2),e.YNc(3,Re,5,3,"ng-template",3),e.YNc(4,rt,5,3,"ng-template",4),e.qZA(),e.YNc(5,dt,2,6,"p-sidebar",5)),2&a&&(e.Q6J("responsiveLayout","stack")("value",s.teamsForTable)("columns",s.isMobile?s.mobileTeamTableColumns:s.teamTableColumns)("rows",s.rows)("showCurrentPageReport",!0)("rowsPerPageOptions",e.DdM(13,pt))("paginator",!0)("totalRecords",s.totalRecords)("sortField",s.sortField)("sortOrder",-1)("filterDelay",0)("globalFilterFields",e.DdM(14,ut)),e.xp6(5),e.Q6J("ngIf",s.display))},dependencies:[h.sg,h.O5,L.iA,E.jx,L.lQ,L.fz,w.o,Q.Y,F.Hq,T],changeDetection:0}),t})();const _t=function(){return{height:"6px"}};function ft(t,i){1&t&&e._UZ(0,"p-progressBar",4),2&t&&e.Akn(e.DdM(2,_t))}function Tt(t,i){if(1&t&&(e.ynx(0),e._UZ(1,"cha-admin-league-teams-table",5),e.BQk()),2&t){const a=i.ngIf,s=e.oxw(2);e.xp6(1),e.Q6J("isMobile",s.isMobile)("teams",a)}}function ht(t,i){if(1&t&&(e.TgZ(0,"blade-card")(1,"blade-card-body"),e.YNc(2,Tt,2,2,"ng-container",3),e.ALo(3,"async"),e.qZA()()),2&t){const a=e.oxw();e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,a.teams$))}}const vt=[{path:"",component:(()=>{class t{constructor(a,s){this.leagueTeamsFacade=a,this.displayFacade=s,this.isLoaded$=this.leagueTeamsFacade.isLoaded$,this.isLoading$=this.leagueTeamsFacade.isLoading$,this.teams$=this.leagueTeamsFacade.teams$,this.displayFacade.isMobile$.pipe((0,Ue.P)()).subscribe(m=>{this.isMobile=m}),this.leagueTeamsFacade.getTeams(),this.leagueTeamsFacade.getUsers(),this.leagueTeamsFacade.getDivisions()}}return t.\u0275fac=function(a){return new(a||t)(e.Y36(C),e.Y36(Ae.pC))},t.\u0275cmp=e.Xpm({type:t,selectors:[["cha-admin-league-teams"]],decls:10,vars:6,consts:[["mode","indeterminate",3,"style",4,"ngIf"],[1,"pt-2"],[1,"text-lg","text-center",2,"font-weight","100"],[4,"ngIf"],["mode","indeterminate"],[3,"isMobile","teams"]],template:function(a,s){1&a&&(e.TgZ(0,"blade-layout-feature-content")(1,"div"),e.YNc(2,ft,1,3,"p-progressBar",0),e.ALo(3,"async"),e.TgZ(4,"div",1)(5,"div",2),e._uU(6," League Teams "),e.qZA()(),e._UZ(7,"blade-divider"),e.YNc(8,ht,4,3,"blade-card",3),e.ALo(9,"async"),e.qZA()()),2&a&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,s.isLoading$)),e.xp6(6),e.Q6J("ngIf",e.lcZ(9,4,s.isLoaded$)))},dependencies:[h.O5,N.k,we.R,D.A,O.y,I.C,gt,h.Ov],encapsulation:2,changeDetection:0}),t})()}];let bt=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Y.Bz.forChild(vt),Y.Bz]}),t})(),xt=(()=>{class t{}return t.\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[G,C],imports:[h.ez,y.UX,U.Xd,N.q,L.U$,w.j,Q.l,F.hJ,q.E,B.N,I.C,bt,n.Aw.forFeature("league-teams",de),c.sQ.forFeature([G]),A.X0.forRoot({wrappers:[{name:"control-wrapper",component:H.t}],types:[{name:"text-input",component:z.T,wrappers:["control-wrapper"]},{name:"checkbox",component:K.C},{name:"single-select",component:W.S,wrappers:["control-wrapper"]}]})]}),t})()}}]);